(function(h){var e,d,q=-1,f=window.sessionStorage,m;h.fn.autosuggest=function(y){function l(b){0<b.length?(!0===m&&!0===g.typeAhead&&u(b[0]),r(b)):k()}function n(b){if(0<b.length){var c=e.value,p=[],d=[],f=new RegExp(c,"gi");if(0<c.length)for(;p.length+d.length!=g.limit&&0!=b.length;){var h=b.shift();0==h.indexOf(c)?p.push(h):1==f.test(h)&&d.push(h)}0<p.length?(!0===m&&!0===g.typeAhead&&u(p[0]),r(p.concat(d))):0<d.length?r(d):k()}else k()}function u(b){if(e.createTextRange||e.setSelectionRange){var c=
e.value.length;e.value=b;b=b.length;if(e.createTextRange){var d=e.createTextRange();d.moveStart("character",c);d.moveEnd("character",b-e.value.length);d.select()}else e.setSelectionRange&&e.setSelectionRange(c,b);e.focus()}}function k(){d.style.visibility="hidden"}function t(b){for(var c=0;c<d.childNodes.length;c++){var e=d.childNodes[c];e==b?e.className="current":"current"==e.className&&(e.className="")}}function v(){for(var b=e,c=0;"BODY"!=b.tagName;)c+=b.offsetLeft,b=b.offsetParent;return c}function w(){for(var b=
e,c=0;"BODY"!=b.tagName;)c+=b.offsetTop,b=b.offsetParent;return c}function r(b){var c;d.innerHTML="";for(var f=0;f<b.length;f++)c=document.createElement("div"),c.appendChild(document.createTextNode(b[f])),d.appendChild(c);d.style.left=v()+"px";d.style.top=w()+e.offsetHeight+"px";d.style.visibility="visible"}function x(){if(null!==g.suggestionsProvider)if(f&&!0===g.cache){var b=new Date,c=f.getItem("jquery-autosuggest-timestamp-77663434589485"),c=new Date(c);if(!(c.getTime()+1E3*g.cacheduration>b.getTime())&&
(b=g.suggestionsProvider.split("."),0<b.length))switch(b.length){case 4:c=window[b[0]][b[1]][b[2]][b[3]](e.value);b=new Date;f.setItem("jquery-autosuggest-data-77663434589485",JSON.stringify(c));f.setItem("jquery-autosuggest-timestamp-77663434589485",b.toISOString());l(c);break;case 3:c=window[b[0]][b[1]][b[2]](e.value);b=new Date;f.setItem("jquery-autosuggest-data-77663434589485",JSON.stringify(c));f.setItem("jquery-autosuggest-timestamp-77663434589485",b.toISOString());l(c);break;case 2:c=window[b[0]][b[1]](e.value);
b=new Date;f.setItem("jquery-autosuggest-data-77663434589485",JSON.stringify(c));f.setItem("jquery-autosuggest-timestamp-77663434589485",b.toISOString());l(c);break;case 1:c=window[suggestionsProvider](e.value),b=new Date,f.setItem("jquery-autosuggest-data-77663434589485",JSON.stringify(c)),f.setItem("jquery-autosuggest-timestamp-77663434589485",b.toISOString()),l(c)}}else{if(b=g.suggestionsProvider.split("."),0<b.length)switch(b.length){case 4:l(window[b[0]][b[1]][b[2]][b[3]](e.value));break;case 3:l(window[b[0]][b[1]][b[2]](e.value));
break;case 2:l(window[b[0]][b[1]](e.value));break;case 1:l(window[suggestionsProvider](e.value))}}else if(null!==g.sugggestionsArray)n(g.sugggestionsArray);else if(null!==g.ajaxurl)if(null!==f&&!0===g.cache){var d=encodeURIComponent(g.ajaxurl),k=encodeURIComponent(g.ajaxurl)+"data";null!==f.getItem(d)?(b=new Date,c=f.getItem(d),c=new Date(c),c.getTime()+1E3*g.cacheduration<b.getTime()?h.ajax({url:g.ajaxurl,type:"GET",dataType:"json",success:function(b){var c=new Date;f.setItem(k,JSON.stringify(b));
f.setItem(d,c.toISOString());n(b)},error:function(b){console.error("There was an error with the ajax request in jquery.autosuggest")}}):n(JSON.parse(f.getItem(k)))):h.ajax({url:g.ajaxurl,type:"GET",dataType:"json",success:function(b){var c=new Date;f.setItem(k,JSON.stringify(b));f.setItem(d,c.toISOString());n(b)},error:function(b){console.error("There was an error with the ajax request in jquery.autosuggest")}})}else h.ajax({url:g.ajaxurl,type:"GET",dataType:"json",success:function(b){n(b)},error:function(b){console.error("There was an error with the ajax request in jquery.autosuggest!")}});
else console.error("No data source provided for jquery.autosuggest!")}e=h(this)[0];(function(b){e=e||(void 0===b?null:b);d=document.createElement("div");d.className="suggestions";d.style.visibility="hidden";d.style.width=e.offsetWidth+"px";document.body.appendChild(d);d.onmousedown=d.onmouseup=d.onmouseover=function(b){b=b||window.event;var d=b.target||b.srcElement;"mousedown"==b.type?(e.value=d.firstChild.nodeValue,k()):"mouseover"==b.type?t(d):e.focus()}})();var g=h.extend({suggestionsProvider:null,
sugggestionsArray:null,typeAhead:!0,ajaxurl:null,cache:!1,limit:10,cacheduration:600},y);h(this).on("keydown",function(b){switch(b.keyCode){case 38:b=d.childNodes;0<b.length&&0<q&&(b=b[--q],t(b),e.value=b.firstChild.nodeValue);break;case 40:b=d.childNodes;0<b.length&&q<b.length-1&&(b=b[++q],t(b),e.value=b.firstChild.nodeValue);break;case 13:k()}});h(this).on("keyup",function(b){if(8==b.keyCode||46==b.keyCode)m=!1,x();32>b.keyCode||33<=b.keyCode&&46>=b.keyCode||112<=b.keyCode&&123>=b.keyCode?m=!1:
(m=!0,x())});h(this).on("blur",function(b){k()});h(window).resize(function(){d.style.width=e.offsetWidth+"px";d.style.left=v()+"px";d.style.top=w()+e.offsetHeight+"px"})}})(jQuery);