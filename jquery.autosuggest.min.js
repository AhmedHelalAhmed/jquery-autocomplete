(function(g){var d,e,h,n=-1,k=window.localStorage,r;g.fn.autosuggest=function(u){function p(a){if(d.createTextRange||d.setSelectionRange){var b=d.value.length;d.value=a;a=a.length;if(d.createTextRange){var c=d.createTextRange();c.moveStart("character",b);c.moveEnd("character",a-d.value.length);c.select()}else d.setSelectionRange&&d.setSelectionRange(b,a);d.focus()}}function l(){e.style.visibility="hidden"}function q(a){for(var b=0;b<e.childNodes.length;b++){var c=e.childNodes[b];c==a?c.className=
"current":"current"==c.className&&(c.className="")}}function m(a){var b;e.innerHTML="";for(var c=0;c<a.length;c++)b=document.createElement("div"),b.appendChild(document.createTextNode(a[c])),e.appendChild(b);a=e.style;b=d;for(c=0;"BODY"!=b.tagName;)c+=b.offsetLeft,b=b.offsetParent;a.left=c+"px";a=e.style;b=d;for(c=0;"BODY"!=b.tagName;)c+=b.offsetTop,b=b.offsetParent;a.top=c+d.offsetHeight+"px";e.style.visibility="visible"}function v(){if(null!==f.provider){var a=f.provider.split(".");if(0<a.length)switch(a.length){case 4:return{userdefined:!0,
list:window[a[0]][a[1]][a[2]][a[3]](h.target.value)};case 3:return{userdefined:!0,list:window[a[0]][a[1]][a[2]](h.target.value)};case 2:return{userdefined:!0,list:window[a[0]][a[1]](h.target.value)};case 1:return{userdefined:!0,list:window[void 0](h.target.value)}}}else{if(null!==f.suggestionsList)return{userdefined:!1,list:f.suggestionsList};if(null!==f.ajaxurl)if(!1!==f.localStorage&&null!==k)if(null!==k.getItem("users-suggestions-timestamp-7766")){var a=new Date,b=k.getItem("users-suggestions-timestamp-7766");
if((new Date(b)).getTime()+6E5<a.getTime())if(!0===navigator.onLine)g.ajax({url:f.ajaxurl,type:"GET",dataType:"json",success:function(a){var b=new Date;k.setItem("users-suggestions-data-7766",JSON.stringify(a));k.setItem("users-suggestions-timestamp-7766",b.toISOString());return{userdefined:!1,list:a}},error:function(a){console.error("There was an error with the ajax request in jquery.autosuggest");return{userdefined:!1,list:[]}}});else return{userdefined:!1,list:JSON.parse(k.getItem("users-suggestions-data-7766"))};
else return{userdefined:!1,list:JSON.parse(k.getItem("users-suggestions-data-7766"))}}else if(!0===navigator.onLine)g.ajax({url:f.ajaxurl,type:"GET",dataType:"json",success:function(a){var b=new Date;k.setItem("users-suggestions-data-7766",JSON.stringify(a));k.setItem("users-suggestions-timestamp-7766",b.toISOString());return{userdefined:!1,list:a}},error:function(a){console.error("There was an error with the ajax request in jquery.autosuggest");return{userdefined:!1,list:[]}}});else return console.error("jquery.autosuggest can't fetch data - you are currently offline!"),
{userdefined:!1,list:[]};else if(!0===navigator.onLine)g.ajax({url:f.ajaxurl,type:"GET",async:!1,dataType:"json",success:function(a){0<a.length?(a=t(h.target.value,a),0<a.identical.length?(!0===r&&!0===f.typeAhead&&p(a.identical[0]),m(a.identical.concat(a.similar))):0<a.similar.length?m(a.similar):l()):l()},error:function(a){console.error("There was an error with the ajax request in jquery.autosuggest!");return{userdefined:!1,list:[]}}});else return console.error("You are not connected to the internet - jquery.autosuggest!"),
{userdefined:!1,list:[]};else return console.error("No data source provided for jquery.autosuggest!"),{userdefined:!1,list:[]}}}function t(a,b){var c={identical:[],similar:[]},d=new RegExp(a,"gi");if(0<a.length)for(;c.identical.length+c.similar.length!=f.limit&&0!=b.length;){var e=b.shift();0==e.indexOf(a)?c.identical.push(e):1==d.test(e)&&c.similar.push(e)}return c}d=g(this);(function(a){d=d||(void 0===a?null:a);e=document.createElement("div");e.className="suggestions";e.style.visibility="hidden";
e.style.width=d.offsetWidth+"px";document.body.appendChild(e);e.onmousedown=e.onmouseup=e.onmouseover=function(a){a=a||window.event;var c=a.target||a.srcElement;"mousedown"==a.type?(d.value=c.firstChild.nodeValue,l()):"mouseover"==a.type?q(c):d.focus()}})();var f=g.extend({suggesionsProvider:null,typeAhead:!0,provider:null,ajaxurl:null,localStorage:!0,sessionStorage:!1,suggestionsList:null,limit:10},u);g(this).on("keydown",function(a){h=a;d=a.target;switch(a.keyCode){case 38:a=e.childNodes;0<a.length&&
0<n&&(a=a[--n],q(a),d.value=a.firstChild.nodeValue);break;case 40:a=e.childNodes;0<a.length&&n<a.length-1&&(a=a[++n],q(a),d.value=a.firstChild.nodeValue);break;case 13:l()}});g(this).on("keyup",function(a){var b;h=a;e.style.width=a.target.offsetWidth+"px";d=a.target;a=a.keyCode;8==a||46==a?(a=!0,b=!1):b=32>a||33<=a&&46>=a||112<=a&&123>=a?a=!1:a=!0;!0===a&&(r=a=b,b=v(),!0===b.userdefined?0<b.list.length?(!0===a&&!0===f.typeAhead&&p(b.list[0]),m(b.list)):l():0<b.list.length?(b=t(h.target.value,b.list),
0<b.identical.length?(!0===a&&!0===f.typeAhead&&p(b.identical[0]),m(b.identical.concat(b.similar))):0<b.similar.length?m(b.similar):l()):l())});g(this).on("blur",function(a){h=a;d=a.target;l()})}})(jQuery);